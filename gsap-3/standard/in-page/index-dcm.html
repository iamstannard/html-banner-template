<!DOCTYPE html>

<html>

<head>

    <title>DCM HTML5 Standard Banner Template</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--***********************************************-->
    <meta name="ad.size" content="width=300,height=250">
    <!--***********************************************-->

    <!--<link rel="icon" href="data:;base64,iVBORwOKGO=" />-->

    <style type="text/css">
        #bannerContainer {
            display: none
        }

    </style>

    <!-- Load GSAP -->
    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.1.1/gsap.min.js"></script>-->
    <script src="https://s0.2mdn.net/ads/studio/cached_libs/gsap_3.1.0_min.js"></script>

    <script>
        // HTML5 Validator
        // https://h5validator.appspot.com/dcm/asset

        var clickTag = "https://www.google.com.au/"; // this url is overwritten in dcm

        (function() {
            var relegateNavigation = '';
            var handleClickTagMessage = function(e) {
                try {
                    var eventData = JSON.parse(e.data);
                } catch (err) {
                    return;
                }
                if (eventData.isInitClickTag) {
                    if (eventData.clickTags) {
                        for (var i = 0; i < eventData.clickTags.length; i++) {
                            var clkTag = eventData.clickTags[i];
                            window[clkTag.name] = clkTag.url;
                        }
                    } else if (eventData.clickTag) {
                        window.clickTag = eventData.clickTag;
                    }
                    relegateNavigation = eventData.relegateNavigation;
                }
            };

            if (open.call) {
                window.open = function(open) {
                    return function(url, name, features) {
                        if (relegateNavigation === 'parent') {
                            var message = {
                                'clickTag': url,
                                'isPostClickTag': true
                            };
                            parent.postMessage(JSON.stringify(message), '*');
                        } else {
                            var args = [url, name];
                            if (features) {
                                args.push(features);
                            }
                            open.apply(window, args);
                        }
                    };
                }(window.open);
            }

            if (window.addEventListener) {
                window.addEventListener(
                    'message', handleClickTagMessage, false);
            } else {
                window.attachEvent('onmessage', handleClickTagMessage);
            }
        })();

        function loadCSSAndJS() {
            //console.log('loadCSSAndJS');
            // Load in CSS 
            //console.log('loadCSS');
            var extCSS = document.createElement('link');
            extCSS.setAttribute('rel', 'stylesheet');
            extCSS.setAttribute('type', 'text/css');
            extCSS.setAttribute('href', 'style.css');
            document.getElementsByTagName('head')[0].appendChild(extCSS);
            // Load in JS
            ////console.log('loadJS');
            var extJavascript = document.createElement('script');
            extJavascript.setAttribute('type', 'text/javascript');
            extJavascript.setAttribute('src', 'script.js');
            document.getElementsByTagName('head')[0].appendChild(extJavascript);
        }

    </script>

</head>

<body onload='loadCSSAndJS()'>
    <div id="bannerContainer">
        <!-- banner stuff goes here -->
        <img id="placeholder" src="images/placeholder.png">
        <img id="cta" src="images/cta.png">
        <!-- empty div handles clickthroughs and adds 1px border -->
        <a href="javascript:void(0);" onclick="window.open(window.clickTag);">
            <div id="clickthrough"></div>
        </a>
    </div>
</body>

</html>
